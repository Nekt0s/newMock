kind: Deployment
apiVersion: apps/v1
metadata:
  annotations:
    deployment.kubernetes.io/revision: '1'
    kubectl.kubernetes.io/last-applied-configuration: >
      {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{},"labels":{"app":"egressgateway-ci02705348-fssp-fnd-process","app.kubernetes.io/component":"gateways","app.kubernetes.io/instance":"ci03654574-synapserbprom2terra","app.kubernetes.io/name":"gateways","app.kubernetes.io/part-of":"istio","chart":"gateways","heritage":"Tiller","istio":"egressgateway-ci02705348-fssp-fnd-process","release":"istio"},"name":"egressgateway-ci02705348-fssp-fnd-process","namespace":"ci02705348-fssp-fnd-process"},"spec":{"progressDeadlineSeconds":1200,"replicas":1,"revisionHistoryLimit":10,"selector":{"matchLabels":{"app":"egressgateway-ci02705348-fssp-fnd-process","istio":"egressgateway-ci02705348-fssp-fnd-process"}},"strategy":{"rollingUpdate":{"maxSurge":1,"maxUnavailable":1},"type":"RollingUpdate"},"template":{"metadata":{"annotations":{"sidecar.istio.io/inject":"false","vault.hashicorp.com/agent-init-first":"true","vault.hashicorp.com/agent-inject":"true","vault.hashicorp.com/agent-inject-file-eda-ca":"ca-cert.pem","vault.hashicorp.com/agent-inject-file-eda-key":"tls.key","vault.hashicorp.com/agent-inject-file-eda-tls":"tls.crt","vault.hashicorp.com/agent-inject-file-egress-gateway-client-file1":"ca.pem","vault.hashicorp.com/agent-inject-file-egress-gateway-client-file2":"tls.key","vault.hashicorp.com/agent-inject-file-egress-gateway-client-file3":"tls.crt","vault.hashicorp.com/agent-inject-file-eks-ca":"ca-cert.pem","vault.hashicorp.com/agent-inject-file-eks-key":"tls.key","vault.hashicorp.com/agent-inject-file-eks-tls":"tls.crt","vault.hashicorp.com/agent-inject-file-gps-ca":"ca-cert.pem","vault.hashicorp.com/agent-inject-file-gps-key":"tls.key","vault.hashicorp.com/agent-inject-file-gps-tls":"tls.crt","vault.hashicorp.com/agent-inject-file-ott-file1":"ott.client.crt","vault.hashicorp.com/agent-inject-file-ott-file2":"ott.client.private.key","vault.hashicorp.com/agent-inject-file-ott-file3":"ott.service.crt","vault.hashicorp.com/agent-inject-file-ott-file4":"ott.service.tls.crt","vault.hashicorp.com/agent-inject-file-tengri-ca":"ca-cert.pem","vault.hashicorp.com/agent-inject-file-tengri-key":"tls.key","vault.hashicorp.com/agent-inject-file-tengri-tls":"tls.crt","vault.hashicorp.com/agent-inject-secret-eda-ca":"true","vault.hashicorp.com/agent-inject-secret-eda-key":"true","vault.hashicorp.com/agent-inject-secret-eda-tls":"true","vault.hashicorp.com/agent-inject-secret-egress-gateway-client-file1":"true","vault.hashicorp.com/agent-inject-secret-egress-gateway-client-file2":"true","vault.hashicorp.com/agent-inject-secret-egress-gateway-client-file3":"true","vault.hashicorp.com/agent-inject-secret-eks-ca":"true","vault.hashicorp.com/agent-inject-secret-eks-key":"true","vault.hashicorp.com/agent-inject-secret-eks-tls":"true","vault.hashicorp.com/agent-inject-secret-gps-ca":"true","vault.hashicorp.com/agent-inject-secret-gps-key":"true","vault.hashicorp.com/agent-inject-secret-gps-tls":"true","vault.hashicorp.com/agent-inject-secret-ott-file1":"true","vault.hashicorp.com/agent-inject-secret-ott-file2":"true","vault.hashicorp.com/agent-inject-secret-ott-file3":"true","vault.hashicorp.com/agent-inject-secret-ott-file4":"true","vault.hashicorp.com/agent-inject-secret-tengri-ca":"true","vault.hashicorp.com/agent-inject-secret-tengri-key":"true","vault.hashicorp.com/agent-inject-secret-tengri-tls":"true","vault.hashicorp.com/agent-inject-template-eda-ca":"{{-
      with secret
      \"/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/eda\"
      -}}\n{{ base64Decode (index .Data \"ca-cert.pem\") }}{{- end
      -}}\n","vault.hashicorp.com/agent-inject-template-eda-key":"{{- with
      secret
      \"/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/eda\"
      -}}\n{{ base64Decode (index .Data \"tls.key\") }}{{- end
      -}}\n","vault.hashicorp.com/agent-inject-template-eda-tls":"{{- with
      secret
      \"/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/eda\"
      -}}\n{{ base64Decode (index .Data \"tls.crt\") }}{{- end
      -}}\n","vault.hashicorp.com/agent-inject-template-egress-gateway-client-file1":"{{-
      with secret
      \"/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/egress-gateway-client-certs\"
      -}}\n{{ base64Decode (index .Data \"ca.pem\") }}{{- end
      -}}\n","vault.hashicorp.com/agent-inject-template-egress-gateway-client-file2":"{{-
      with secret
      \"/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/egress-gateway-client-certs\"
      -}}\n{{ base64Decode (index .Data \"tls.key\") }}{{- end
      -}}\n","vault.hashicorp.com/agent-inject-template-egress-gateway-client-file3":"{{-
      with secret
      \"/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/egress-gateway-client-certs\"
      -}}\n{{ base64Decode (index .Data \"tls.crt\") }}{{- end -}}         
      \n","vault.hashicorp.com/agent-inject-template-eks-ca":"{{- with secret
      \"/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/eks\"
      -}}\n{{ base64Decode (index .Data \"ca-cert.pem\") }}{{- end
      -}}\n","vault.hashicorp.com/agent-inject-template-eks-key":"{{- with
      secret
      \"/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/eks\"
      -}}\n{{ base64Decode (index .Data \"tls.key\") }}{{- end
      -}}\n","vault.hashicorp.com/agent-inject-template-eks-tls":"{{- with
      secret
      \"/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/eks\"
      -}}\n{{ base64Decode (index .Data \"tls.crt\") }}{{- end
      -}}\n","vault.hashicorp.com/agent-inject-template-gps-ca":"{{- with secret
      \"/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/gps\"
      -}}\n{{ base64Decode (index .Data \"ca-cert.pem\") }}{{- end
      -}}\n","vault.hashicorp.com/agent-inject-template-gps-key":"{{- with
      secret
      \"/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/gps\"
      -}}\n{{ base64Decode (index .Data \"tls.key\") }}{{- end
      -}}\n","vault.hashicorp.com/agent-inject-template-gps-tls":"{{- with
      secret
      \"/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/gps\"
      -}}\n{{ base64Decode (index .Data \"tls.crt\") }}{{- end
      -}}\n","vault.hashicorp.com/agent-inject-template-ott-file1":"{{- with
      secret
      \"/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/ott-cert-store-secret\"
      -}}\n{{ base64Decode (index .Data \"ott.client.crt\") }}{{- end
      -}}\n","vault.hashicorp.com/agent-inject-template-ott-file2":"{{- with
      secret
      \"/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/ott-cert-store-secret\"
      -}}\n{{ base64Decode (index .Data \"ott.client.private.key\") }}{{- end
      -}}\n","vault.hashicorp.com/agent-inject-template-ott-file3":"{{- with
      secret
      \"/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/ott-cert-store-secret\"
      -}}\n{{ base64Decode (index .Data \"ott.service.crt\") }}{{- end
      -}}\n","vault.hashicorp.com/agent-inject-template-ott-file4":"{{- with
      secret
      \"/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/ott-cert-store-secret\"
      -}}\n{{ base64Decode (index .Data \"ott.service.tls.crt\") }}{{- end
      -}}\n","vault.hashicorp.com/agent-inject-template-tengri-ca":"{{- with
      secret
      \"/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/tengri\"
      -}}\n{{ base64Decode (index .Data \"ca-cert.pem\") }}{{- end
      -}}\n","vault.hashicorp.com/agent-inject-template-tengri-key":"{{- with
      secret
      \"/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/tengri\"
      -}}\n{{ base64Decode (index .Data \"tls.key\") }}{{- end
      -}}\n","vault.hashicorp.com/agent-inject-template-tengri-tls":"{{- with
      secret
      \"/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/tengri\"
      -}}\n{{ base64Decode (index .Data \"tls.crt\") }}{{- end
      -}}\n","vault.hashicorp.com/agent-limits-cpu":"180m","vault.hashicorp.com/agent-limits-mem":"256Mi","vault.hashicorp.com/agent-pre-populate-only":"true","vault.hashicorp.com/agent-requests-cpu":"156m","vault.hashicorp.com/agent-requests-mem":"180Mi","vault.hashicorp.com/log-level":"debug","vault.hashicorp.com/namespace":"CI02705348_CI02720459","vault.hashicorp.com/role":"ci02705348-fssp-fnd-process","vault.hashicorp.com/secret-volume-path-eda-ca":"/mnt/eda","vault.hashicorp.com/secret-volume-path-eda-key":"/mnt/eda","vault.hashicorp.com/secret-volume-path-eda-tls":"/mnt/eda","vault.hashicorp.com/secret-volume-path-egress-gateway-client-file1":"/etc/istio/egress-gateway-client-certs","vault.hashicorp.com/secret-volume-path-egress-gateway-client-file2":"/etc/istio/egress-gateway-client-certs","vault.hashicorp.com/secret-volume-path-egress-gateway-client-file3":"/etc/istio/egress-gateway-client-certs","vault.hashicorp.com/secret-volume-path-eks-ca":"/mnt/eks","vault.hashicorp.com/secret-volume-path-eks-key":"/mnt/eks","vault.hashicorp.com/secret-volume-path-eks-tls":"/mnt/eks","vault.hashicorp.com/secret-volume-path-gps-ca":"/mnt/gps","vault.hashicorp.com/secret-volume-path-gps-key":"/mnt/gps","vault.hashicorp.com/secret-volume-path-gps-tls":"/mnt/gps","vault.hashicorp.com/secret-volume-path-ott-file1":"/mnt/secrets/","vault.hashicorp.com/secret-volume-path-ott-file2":"/mnt/secrets/","vault.hashicorp.com/secret-volume-path-ott-file3":"/mnt/secrets/","vault.hashicorp.com/secret-volume-path-ott-file4":"/mnt/secrets/","vault.hashicorp.com/secret-volume-path-tengri-ca":"/fluent-bit/cert","vault.hashicorp.com/secret-volume-path-tengri-key":"/fluent-bit/cert","vault.hashicorp.com/secret-volume-path-tengri-tls":"/fluent-bit/cert"},"labels":{"app":"egressgateway-ci02705348-fssp-fnd-process","chart":"gateways","heritage":"Tiller","istio":"egressgateway-ci02705348-fssp-fnd-process","release":"istio","secman-injector":"enabled"}},"spec":{"affinity":{"nodeAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"preference":{"matchExpressions":[{"key":"beta.kubernetes.io/arch","operator":"In","values":["amd64"]}]},"weight":2},{"preference":{"matchExpressions":[{"key":"beta.kubernetes.io/arch","operator":"In","values":["ppc64le"]}]},"weight":2},{"preference":{"matchExpressions":[{"key":"beta.kubernetes.io/arch","operator":"In","values":["s390x"]}]},"weight":2}],"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchExpressions":[{"key":"beta.kubernetes.io/arch","operator":"In","values":["amd64","ppc64le","s390x"]}]}]}},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["egressgateway-ci02705348-fssp-fnd-process"]}]},"topologyKey":"kubernetes.io/hostname"},"weight":1}]}},"containers":[{"args":["proxy","router","--domain","$(POD_NAMESPACE).svc.cluster.local","--proxyLogLevel=warning","--proxyComponentLogLevel=misc:error","--log_output_level=default:info","--serviceCluster","egressgateway-ci02705348-fssp-fnd-process.$(POD_NAMESPACE)","--trust-domain=cluster.local"],"env":[{"name":"JWT_POLICY","value":"first-party-jwt"},{"name":"PILOT_CERT_PROVIDER","value":"istiod"},{"name":"CA_ADDR","value":"istiod-basic.ci03654574-synapserbprom2terra.svc:15012"},{"name":"NODE_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"spec.nodeName"}}},{"name":"POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"INSTANCE_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.podIP"}}},{"name":"HOST_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}},{"name":"SERVICE_ACCOUNT","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"spec.serviceAccountName"}}},{"name":"CANONICAL_SERVICE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['service.istio.io/canonical-name']"}}},{"name":"CANONICAL_REVISION","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['service.istio.io/canonical-revision']"}}},{"name":"ISTIO_META_WORKLOAD_NAME","value":"egressgateway-ci02705348-fssp-fnd-process"},{"name":"ISTIO_META_OWNER","value":"kubernetes://apis/apps/v1/namespaces/ci02705348-fssp-fnd-process/deployments/ingressgateway-ci02705348-fssp-fnd-process"},{"name":"ISTIO_META_MESH_ID","value":"cluster.local"},{"name":"PROXY_CONFIG","value":"{\"discoveryAddress\":\"istiod-basic.ci03654574-synapserbprom2terra.svc:15012\",\"tracing\":{\"zipkin\":{\"address\":\"jaeger-collector.ci03654574-synapserbprom2terra.svc:9411\"},\"tlsSettings\":{\"subjectAltNames\":[]}},\"proxyMetadata\":{\"DNS_AGENT\":\"\"}}\n"},{"name":"ISTIO_META_ROUTER_MODE","value":"sni-dnat"},{"name":"ISTIO_META_CLUSTER_ID","value":"Kubernetes"}],"image":"registry.redhat.io/openshift-service-mesh/proxyv2-rhel8@sha256:320f5bd35c208e00005c01ce0e83c8f05276119f273e9f881da950fdfff59a13","imagePullPolicy":"Always","name":"istio-proxy","ports":[{"containerPort":15090,"name":"http-envoy-prom","protocol":"TCP"}],"readinessProbe":{"failureThreshold":30,"httpGet":{"path":"/actuator/health","port":15023,"scheme":"HTTP"},"initialDelaySeconds":1,"periodSeconds":2,"successThreshold":1,"timeoutSeconds":5},"resources":{"limits":{"cpu":"900m","memory":"1800Mi"},"requests":{"cpu":"700m","memory":"1500Mi"}},"securityContext":{"privileged":false,"readOnlyRootFilesystem":true,"runAsNonRoot":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/etc/istio/proxy","name":"istio-envoy"},{"mountPath":"/var/run/secrets/istio","name":"istiod-ca-cert"},{"mountPath":"/etc/istio/pod","name":"podinfo"},{"mountPath":"/mnt/ott-uds-socket","name":"ott-uds-socket"}]},{"env":[{"name":"JAVA_TOOL_OPTIONS","value":"-Dlogging.config=/tmp/ott-logback/logback.xml
      -Dlogback.configurationFile=/tmp/ott-logback/logback.xml"}],"envFrom":[{"configMapRef":{"name":"ott-settings"}}],"image":"registry.ca.sbrf.ru/sigma/pprb/ci00641491/ci01125613_ott/ott-client-api@sha256:e7c8a9a5745c32ab2157a6c823f1174c31de5d08bd35fbc0bc1918fd24b6c7fc","imagePullPolicy":"Always","name":"ott-sidecar","readinessProbe":{"failureThreshold":30,"httpGet":{"path":"/actuator/health","port":15023,"scheme":"HTTP"},"initialDelaySeconds":3,"periodSeconds":1,"successThreshold":1,"timeoutSeconds":3},"resources":{"limits":{"cpu":"600m","memory":"1800Mi"},"requests":{"cpu":"400m","memory":"1500Mi"}},"securityContext":{"privileged":false,"readOnlyRootFilesystem":true,"runAsNonRoot":true},"volumeMounts":[{"mountPath":"/tmp/ott-logback","name":"ott-logback","readOnly":true},{"mountPath":"/mnt/ott-uds-socket","name":"ott-uds-socket"},{"mountPath":"/tmp","name":"ott-tmp"}]}],"dnsPolicy":"ClusterFirst","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"serviceAccountName":"default","terminationGracePeriodSeconds":60,"volumes":[{"emptyDir":{},"name":"istio-envoy"},{"configMap":{"defaultMode":256,"name":"istio-ca-root-cert"},"name":"istiod-ca-cert"},{"downwardAPI":{"defaultMode":256,"items":[{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels"},"path":"labels"},{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.annotations"},"path":"annotations"}]},"name":"podinfo"},{"configMap":{"defaultMode":256,"name":"egress-ott-logback"},"name":"ott-logback"},{"emptyDir":{"medium":"Memory"},"name":"ott-uds-socket"},{"emptyDir":{},"name":"ott-tmp"}]}}}}
  resourceVersion: '1550065745'
  name: egressgateway-ci02705348-fssp-fnd-process
  uid: 83ffae5a-76e1-4950-adb7-252f413f5e65
  creationTimestamp: '2023-11-22T20:52:55Z'
  generation: 1
  managedFields:
    - manager: oc
      operation: Update
      apiVersion: apps/v1
      time: '2023-11-22T20:52:55Z'
      fieldsType: FieldsV1
      fieldsV1:
        'f:metadata':
          'f:annotations':
            .: {}
            'f:kubectl.kubernetes.io/last-applied-configuration': {}
          'f:labels':
            'f:chart': {}
            'f:app': {}
            'f:app.kubernetes.io/name': {}
            .: {}
            'f:app.kubernetes.io/part-of': {}
            'f:release': {}
            'f:heritage': {}
            'f:app.kubernetes.io/instance': {}
            'f:app.kubernetes.io/component': {}
            'f:istio': {}
        'f:spec':
          'f:progressDeadlineSeconds': {}
          'f:replicas': {}
          'f:revisionHistoryLimit': {}
          'f:selector': {}
          'f:strategy':
            'f:rollingUpdate':
              .: {}
              'f:maxSurge': {}
              'f:maxUnavailable': {}
            'f:type': {}
          'f:template':
            'f:metadata':
              'f:annotations':
                'f:vault.hashicorp.com/agent-inject': {}
                'f:vault.hashicorp.com/agent-inject-secret-eda-tls': {}
                'f:vault.hashicorp.com/agent-inject-file-eks-ca': {}
                'f:vault.hashicorp.com/agent-limits-cpu': {}
                'f:vault.hashicorp.com/agent-init-first': {}
                'f:vault.hashicorp.com/agent-inject-secret-tengri-key': {}
                'f:vault.hashicorp.com/agent-inject-secret-eda-key': {}
                'f:vault.hashicorp.com/agent-inject-secret-egress-gateway-client-file1': {}
                'f:vault.hashicorp.com/agent-inject-template-tengri-ca': {}
                'f:vault.hashicorp.com/agent-inject-template-eks-ca': {}
                'f:vault.hashicorp.com/agent-inject-file-gps-ca': {}
                'f:vault.hashicorp.com/agent-inject-secret-egress-gateway-client-file2': {}
                'f:vault.hashicorp.com/secret-volume-path-eda-tls': {}
                'f:vault.hashicorp.com/agent-inject-secret-egress-gateway-client-file3': {}
                'f:vault.hashicorp.com/agent-inject-file-tengri-ca': {}
                'f:vault.hashicorp.com/agent-inject-secret-ott-file1': {}
                'f:vault.hashicorp.com/agent-inject-template-gps-ca': {}
                'f:vault.hashicorp.com/agent-inject-secret-gps-tls': {}
                'f:vault.hashicorp.com/agent-inject-secret-ott-file2': {}
                'f:vault.hashicorp.com/secret-volume-path-eda-key': {}
                'f:vault.hashicorp.com/secret-volume-path-eks-ca': {}
                'f:vault.hashicorp.com/agent-inject-secret-ott-file3': {}
                'f:vault.hashicorp.com/secret-volume-path-egress-gateway-client-file1': {}
                'f:vault.hashicorp.com/agent-inject-secret-ott-file4': {}
                'f:vault.hashicorp.com/agent-inject-template-eda-tls': {}
                'f:vault.hashicorp.com/secret-volume-path-egress-gateway-client-file2': {}
                'f:vault.hashicorp.com/agent-inject-secret-eks-tls': {}
                'f:vault.hashicorp.com/secret-volume-path-egress-gateway-client-file3': {}
                'f:vault.hashicorp.com/agent-inject-file-eda-tls': {}
                'f:vault.hashicorp.com/agent-inject-secret-gps-key': {}
                'f:vault.hashicorp.com/secret-volume-path-ott-file1': {}
                'f:vault.hashicorp.com/secret-volume-path-gps-ca': {}
                'f:vault.hashicorp.com/agent-inject-file-eda-ca': {}
                'f:vault.hashicorp.com/secret-volume-path-ott-file2': {}
                'f:vault.hashicorp.com/secret-volume-path-gps-tls': {}
                .: {}
                'f:vault.hashicorp.com/agent-inject-template-egress-gateway-client-file1': {}
                'f:vault.hashicorp.com/agent-inject-secret-eks-ca': {}
                'f:vault.hashicorp.com/agent-inject-template-eda-key': {}
                'f:vault.hashicorp.com/secret-volume-path-ott-file3': {}
                'f:vault.hashicorp.com/agent-requests-cpu': {}
                'f:vault.hashicorp.com/agent-inject-template-egress-gateway-client-file2': {}
                'f:vault.hashicorp.com/agent-limits-mem': {}
                'f:vault.hashicorp.com/secret-volume-path-ott-file4': {}
                'f:vault.hashicorp.com/agent-inject-template-eda-ca': {}
                'f:vault.hashicorp.com/agent-inject-secret-eks-key': {}
                'f:vault.hashicorp.com/agent-inject-template-egress-gateway-client-file3': {}
                'f:vault.hashicorp.com/agent-inject-file-egress-gateway-client-file1': {}
                'f:vault.hashicorp.com/secret-volume-path-eks-tls': {}
                'f:vault.hashicorp.com/agent-inject-file-eda-key': {}
                'f:vault.hashicorp.com/agent-inject-file-egress-gateway-client-file2': {}
                'f:vault.hashicorp.com/secret-volume-path-gps-key': {}
                'f:vault.hashicorp.com/agent-inject-template-ott-file1': {}
                'f:vault.hashicorp.com/agent-inject-secret-gps-ca': {}
                'f:vault.hashicorp.com/agent-inject-template-gps-tls': {}
                'f:vault.hashicorp.com/agent-inject-file-egress-gateway-client-file3': {}
                'f:vault.hashicorp.com/agent-inject-template-ott-file2': {}
                'f:vault.hashicorp.com/agent-inject-file-tengri-tls': {}
                'f:vault.hashicorp.com/agent-inject-template-ott-file3': {}
                'f:vault.hashicorp.com/agent-inject-file-ott-file1': {}
                'f:vault.hashicorp.com/secret-volume-path-eda-ca': {}
                'f:vault.hashicorp.com/log-level': {}
                'f:vault.hashicorp.com/agent-inject-file-gps-tls': {}
                'f:vault.hashicorp.com/agent-inject-template-ott-file4': {}
                'f:vault.hashicorp.com/namespace': {}
                'f:vault.hashicorp.com/secret-volume-path-eks-key': {}
                'f:vault.hashicorp.com/agent-inject-file-ott-file2': {}
                'f:vault.hashicorp.com/agent-inject-template-eks-tls': {}
                'f:vault.hashicorp.com/agent-inject-template-tengri-tls': {}
                'f:vault.hashicorp.com/agent-inject-file-ott-file3': {}
                'f:vault.hashicorp.com/agent-inject-template-gps-key': {}
                'f:vault.hashicorp.com/agent-pre-populate-only': {}
                'f:vault.hashicorp.com/agent-inject-file-ott-file4': {}
                'f:vault.hashicorp.com/agent-inject-file-eks-tls': {}
                'f:sidecar.istio.io/inject': {}
                'f:vault.hashicorp.com/agent-inject-file-tengri-key': {}
                'f:vault.hashicorp.com/agent-inject-file-gps-key': {}
                'f:vault.hashicorp.com/agent-inject-template-eks-key': {}
                'f:vault.hashicorp.com/agent-inject-template-tengri-key': {}
                'f:vault.hashicorp.com/agent-inject-secret-eda-ca': {}
                'f:vault.hashicorp.com/agent-inject-secret-tengri-ca': {}
                'f:vault.hashicorp.com/secret-volume-path-tengri-tls': {}
                'f:vault.hashicorp.com/agent-inject-file-eks-key': {}
                'f:vault.hashicorp.com/agent-requests-mem': {}
                'f:vault.hashicorp.com/role': {}
                'f:vault.hashicorp.com/secret-volume-path-tengri-key': {}
                'f:vault.hashicorp.com/secret-volume-path-tengri-ca': {}
                'f:vault.hashicorp.com/agent-inject-secret-tengri-tls': {}
              'f:labels':
                .: {}
                'f:app': {}
                'f:chart': {}
                'f:heritage': {}
                'f:istio': {}
                'f:release': {}
                'f:secman-injector': {}
            'f:spec':
              'f:volumes':
                .: {}
                'k:{"name":"istio-envoy"}':
                  .: {}
                  'f:emptyDir': {}
                  'f:name': {}
                'k:{"name":"istiod-ca-cert"}':
                  .: {}
                  'f:configMap':
                    .: {}
                    'f:defaultMode': {}
                    'f:name': {}
                  'f:name': {}
                'k:{"name":"ott-logback"}':
                  .: {}
                  'f:configMap':
                    .: {}
                    'f:defaultMode': {}
                    'f:name': {}
                  'f:name': {}
                'k:{"name":"ott-tmp"}':
                  .: {}
                  'f:emptyDir': {}
                  'f:name': {}
                'k:{"name":"ott-uds-socket"}':
                  .: {}
                  'f:emptyDir':
                    .: {}
                    'f:medium': {}
                  'f:name': {}
                'k:{"name":"podinfo"}':
                  .: {}
                  'f:downwardAPI':
                    .: {}
                    'f:defaultMode': {}
                    'f:items': {}
                  'f:name': {}
              'f:containers':
                'k:{"name":"istio-proxy"}':
                  'f:image': {}
                  'f:volumeMounts':
                    .: {}
                    'k:{"mountPath":"/etc/istio/pod"}':
                      .: {}
                      'f:mountPath': {}
                      'f:name': {}
                    'k:{"mountPath":"/etc/istio/proxy"}':
                      .: {}
                      'f:mountPath': {}
                      'f:name': {}
                    'k:{"mountPath":"/mnt/ott-uds-socket"}':
                      .: {}
                      'f:mountPath': {}
                      'f:name': {}
                    'k:{"mountPath":"/var/run/secrets/istio"}':
                      .: {}
                      'f:mountPath': {}
                      'f:name': {}
                  'f:terminationMessagePolicy': {}
                  .: {}
                  'f:resources':
                    .: {}
                    'f:limits':
                      .: {}
                      'f:cpu': {}
                      'f:memory': {}
                    'f:requests':
                      .: {}
                      'f:cpu': {}
                      'f:memory': {}
                  'f:args': {}
                  'f:env':
                    'k:{"name":"INSTANCE_IP"}':
                      .: {}
                      'f:name': {}
                      'f:valueFrom':
                        .: {}
                        'f:fieldRef':
                          .: {}
                          'f:apiVersion': {}
                          'f:fieldPath': {}
                    'k:{"name":"CA_ADDR"}':
                      .: {}
                      'f:name': {}
                      'f:value': {}
                    'k:{"name":"ISTIO_META_MESH_ID"}':
                      .: {}
                      'f:name': {}
                      'f:value': {}
                    'k:{"name":"POD_NAME"}':
                      .: {}
                      'f:name': {}
                      'f:valueFrom':
                        .: {}
                        'f:fieldRef':
                          .: {}
                          'f:apiVersion': {}
                          'f:fieldPath': {}
                    'k:{"name":"CANONICAL_REVISION"}':
                      .: {}
                      'f:name': {}
                      'f:valueFrom':
                        .: {}
                        'f:fieldRef':
                          .: {}
                          'f:apiVersion': {}
                          'f:fieldPath': {}
                    'k:{"name":"ISTIO_META_OWNER"}':
                      .: {}
                      'f:name': {}
                      'f:value': {}
                    'k:{"name":"ISTIO_META_WORKLOAD_NAME"}':
                      .: {}
                      'f:name': {}
                      'f:value': {}
                    .: {}
                    'k:{"name":"JWT_POLICY"}':
                      .: {}
                      'f:name': {}
                      'f:value': {}
                    'k:{"name":"HOST_IP"}':
                      .: {}
                      'f:name': {}
                      'f:valueFrom':
                        .: {}
                        'f:fieldRef':
                          .: {}
                          'f:apiVersion': {}
                          'f:fieldPath': {}
                    'k:{"name":"ISTIO_META_ROUTER_MODE"}':
                      .: {}
                      'f:name': {}
                      'f:value': {}
                    'k:{"name":"POD_NAMESPACE"}':
                      .: {}
                      'f:name': {}
                      'f:valueFrom':
                        .: {}
                        'f:fieldRef':
                          .: {}
                          'f:apiVersion': {}
                          'f:fieldPath': {}
                    'k:{"name":"SERVICE_ACCOUNT"}':
                      .: {}
                      'f:name': {}
                      'f:valueFrom':
                        .: {}
                        'f:fieldRef':
                          .: {}
                          'f:apiVersion': {}
                          'f:fieldPath': {}
                    'k:{"name":"PILOT_CERT_PROVIDER"}':
                      .: {}
                      'f:name': {}
                      'f:value': {}
                    'k:{"name":"PROXY_CONFIG"}':
                      .: {}
                      'f:name': {}
                      'f:value': {}
                    'k:{"name":"NODE_NAME"}':
                      .: {}
                      'f:name': {}
                      'f:valueFrom':
                        .: {}
                        'f:fieldRef':
                          .: {}
                          'f:apiVersion': {}
                          'f:fieldPath': {}
                    'k:{"name":"CANONICAL_SERVICE"}':
                      .: {}
                      'f:name': {}
                      'f:valueFrom':
                        .: {}
                        'f:fieldRef':
                          .: {}
                          'f:apiVersion': {}
                          'f:fieldPath': {}
                    'k:{"name":"ISTIO_META_CLUSTER_ID"}':
                      .: {}
                      'f:name': {}
                      'f:value': {}
                  'f:readinessProbe':
                    .: {}
                    'f:failureThreshold': {}
                    'f:httpGet':
                      .: {}
                      'f:path': {}
                      'f:port': {}
                      'f:scheme': {}
                    'f:initialDelaySeconds': {}
                    'f:periodSeconds': {}
                    'f:successThreshold': {}
                    'f:timeoutSeconds': {}
                  'f:securityContext':
                    .: {}
                    'f:privileged': {}
                    'f:readOnlyRootFilesystem': {}
                    'f:runAsNonRoot': {}
                  'f:terminationMessagePath': {}
                  'f:imagePullPolicy': {}
                  'f:ports':
                    .: {}
                    'k:{"containerPort":15090,"protocol":"TCP"}':
                      .: {}
                      'f:containerPort': {}
                      'f:name': {}
                      'f:protocol': {}
                  'f:name': {}
                'k:{"name":"ott-sidecar"}':
                  'f:envFrom': {}
                  'f:image': {}
                  'f:volumeMounts':
                    .: {}
                    'k:{"mountPath":"/mnt/ott-uds-socket"}':
                      .: {}
                      'f:mountPath': {}
                      'f:name': {}
                    'k:{"mountPath":"/tmp"}':
                      .: {}
                      'f:mountPath': {}
                      'f:name': {}
                    'k:{"mountPath":"/tmp/ott-logback"}':
                      .: {}
                      'f:mountPath': {}
                      'f:name': {}
                      'f:readOnly': {}
                  'f:terminationMessagePolicy': {}
                  .: {}
                  'f:resources':
                    .: {}
                    'f:limits':
                      .: {}
                      'f:cpu': {}
                      'f:memory': {}
                    'f:requests':
                      .: {}
                      'f:cpu': {}
                      'f:memory': {}
                  'f:env':
                    .: {}
                    'k:{"name":"JAVA_TOOL_OPTIONS"}':
                      .: {}
                      'f:name': {}
                      'f:value': {}
                  'f:readinessProbe':
                    .: {}
                    'f:failureThreshold': {}
                    'f:httpGet':
                      .: {}
                      'f:path': {}
                      'f:port': {}
                      'f:scheme': {}
                    'f:initialDelaySeconds': {}
                    'f:periodSeconds': {}
                    'f:successThreshold': {}
                    'f:timeoutSeconds': {}
                  'f:securityContext':
                    .: {}
                    'f:privileged': {}
                    'f:readOnlyRootFilesystem': {}
                    'f:runAsNonRoot': {}
                  'f:terminationMessagePath': {}
                  'f:imagePullPolicy': {}
                  'f:name': {}
              'f:dnsPolicy': {}
              'f:serviceAccount': {}
              'f:restartPolicy': {}
              'f:schedulerName': {}
              'f:terminationGracePeriodSeconds': {}
              'f:serviceAccountName': {}
              'f:securityContext': {}
              'f:affinity':
                .: {}
                'f:nodeAffinity':
                  .: {}
                  'f:preferredDuringSchedulingIgnoredDuringExecution': {}
                  'f:requiredDuringSchedulingIgnoredDuringExecution':
                    .: {}
                    'f:nodeSelectorTerms': {}
                'f:podAntiAffinity':
                  .: {}
                  'f:preferredDuringSchedulingIgnoredDuringExecution': {}
    - manager: kube-controller-manager
      operation: Update
      apiVersion: apps/v1
      time: '2023-11-22T20:54:06Z'
      fieldsType: FieldsV1
      fieldsV1:
        'f:metadata':
          'f:annotations':
            'f:deployment.kubernetes.io/revision': {}
        'f:status':
          'f:availableReplicas': {}
          'f:conditions':
            .: {}
            'k:{"type":"Available"}':
              .: {}
              'f:lastTransitionTime': {}
              'f:lastUpdateTime': {}
              'f:message': {}
              'f:reason': {}
              'f:status': {}
              'f:type': {}
            'k:{"type":"Progressing"}':
              .: {}
              'f:lastTransitionTime': {}
              'f:lastUpdateTime': {}
              'f:message': {}
              'f:reason': {}
              'f:status': {}
              'f:type': {}
          'f:observedGeneration': {}
          'f:readyReplicas': {}
          'f:replicas': {}
          'f:updatedReplicas': {}
  namespace: ci02705348-fssp-fnd-process
  labels:
    app: egressgateway-ci02705348-fssp-fnd-process
    app.kubernetes.io/part-of: istio
    app.kubernetes.io/instance: ci03654574-synapserbprom2terra
    release: istio
    app.kubernetes.io/component: gateways
    istio: egressgateway-ci02705348-fssp-fnd-process
    app.kubernetes.io/name: gateways
    chart: gateways
    heritage: Tiller
spec:
  replicas: 1
  selector:
    matchLabels:
      app: egressgateway-ci02705348-fssp-fnd-process
      istio: egressgateway-ci02705348-fssp-fnd-process
  template:
    metadata:
      creationTimestamp: null
      labels:
        app: egressgateway-ci02705348-fssp-fnd-process
        chart: gateways
        heritage: Tiller
        istio: egressgateway-ci02705348-fssp-fnd-process
        release: istio
        secman-injector: enabled
      annotations:
        vault.hashicorp.com/agent-inject-secret-gps-key: 'true'
        vault.hashicorp.com/agent-inject-file-eda-tls: tls.crt
        vault.hashicorp.com/secret-volume-path-eks-key: /mnt/eks
        vault.hashicorp.com/secret-volume-path-gps-ca: /mnt/gps
        vault.hashicorp.com/agent-inject-template-tengri-tls: >
          {{- with secret
          "/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/tengri"
          -}}

          {{ base64Decode (index .Data "tls.crt") }}{{- end -}}
        vault.hashicorp.com/agent-inject-template-egress-gateway-client-file1: >
          {{- with secret
          "/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/egress-gateway-client-certs"
          -}}

          {{ base64Decode (index .Data "ca.pem") }}{{- end -}}
        vault.hashicorp.com/agent-inject-template-eda-key: >
          {{- with secret
          "/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/eda"
          -}}

          {{ base64Decode (index .Data "tls.key") }}{{- end -}}
        vault.hashicorp.com/agent-inject-template-egress-gateway-client-file2: >
          {{- with secret
          "/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/egress-gateway-client-certs"
          -}}

          {{ base64Decode (index .Data "tls.key") }}{{- end -}}
        vault.hashicorp.com/agent-inject-secret-eks-key: 'true'
        vault.hashicorp.com/agent-inject-file-tengri-key: tls.key
        vault.hashicorp.com/agent-inject-template-egress-gateway-client-file3: >
          {{- with secret
          "/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/egress-gateway-client-certs"
          -}}

          {{ base64Decode (index .Data "tls.crt") }}{{- end -}}          
        vault.hashicorp.com/agent-inject-file-eda-key: tls.key
        vault.hashicorp.com/agent-inject-file-egress-gateway-client-file1: ca.pem
        vault.hashicorp.com/agent-inject-template-ott-file1: >
          {{- with secret
          "/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/ott-cert-store-secret"
          -}}

          {{ base64Decode (index .Data "ott.client.crt") }}{{- end -}}
        vault.hashicorp.com/agent-inject-secret-eda-ca: 'true'
        vault.hashicorp.com/agent-inject-template-tengri-key: >
          {{- with secret
          "/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/tengri"
          -}}

          {{ base64Decode (index .Data "tls.key") }}{{- end -}}
        vault.hashicorp.com/agent-inject-file-egress-gateway-client-file2: tls.key
        vault.hashicorp.com/agent-inject-template-ott-file2: >
          {{- with secret
          "/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/ott-cert-store-secret"
          -}}

          {{ base64Decode (index .Data "ott.client.private.key") }}{{- end -}}
        vault.hashicorp.com/agent-inject-template-gps-tls: >
          {{- with secret
          "/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/gps"
          -}}

          {{ base64Decode (index .Data "tls.crt") }}{{- end -}}
        vault.hashicorp.com/agent-inject-file-egress-gateway-client-file3: tls.crt
        vault.hashicorp.com/agent-inject-template-ott-file3: >
          {{- with secret
          "/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/ott-cert-store-secret"
          -}}

          {{ base64Decode (index .Data "ott.service.crt") }}{{- end -}}
        vault.hashicorp.com/agent-requests-mem: 180Mi
        vault.hashicorp.com/agent-inject-file-ott-file1: ott.client.crt
        vault.hashicorp.com/agent-inject-template-ott-file4: >
          {{- with secret
          "/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/ott-cert-store-secret"
          -}}

          {{ base64Decode (index .Data "ott.service.tls.crt") }}{{- end -}}
        vault.hashicorp.com/secret-volume-path-eda-ca: /mnt/eda
        vault.hashicorp.com/log-level: debug
        vault.hashicorp.com/agent-inject-file-gps-tls: tls.crt
        vault.hashicorp.com/agent-inject-file-ott-file2: ott.client.private.key
        vault.hashicorp.com/namespace: CI02705348_CI02720459
        vault.hashicorp.com/agent-inject-template-eks-tls: >
          {{- with secret
          "/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/eks"
          -}}

          {{ base64Decode (index .Data "tls.crt") }}{{- end -}}
        vault.hashicorp.com/role: ci02705348-fssp-fnd-process
        vault.hashicorp.com/agent-inject-file-ott-file3: ott.service.crt
        vault.hashicorp.com/agent-inject-template-gps-key: >
          {{- with secret
          "/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/gps"
          -}}

          {{ base64Decode (index .Data "tls.key") }}{{- end -}}
        vault.hashicorp.com/agent-inject-file-ott-file4: ott.service.tls.crt
        vault.hashicorp.com/agent-pre-populate-only: 'true'
        vault.hashicorp.com/agent-inject-secret-tengri-tls: 'true'
        sidecar.istio.io/inject: 'false'
        vault.hashicorp.com/agent-inject-file-eks-tls: tls.crt
        vault.hashicorp.com/secret-volume-path-tengri-ca: /fluent-bit/cert
        vault.hashicorp.com/agent-inject-file-gps-key: tls.key
        vault.hashicorp.com/agent-inject: 'true'
        vault.hashicorp.com/agent-inject-template-eks-key: >
          {{- with secret
          "/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/eks"
          -}}

          {{ base64Decode (index .Data "tls.key") }}{{- end -}}
        vault.hashicorp.com/secret-volume-path-tengri-tls: /fluent-bit/cert
        vault.hashicorp.com/agent-init-first: 'true'
        vault.hashicorp.com/agent-inject-file-eks-ca: ca-cert.pem
        vault.hashicorp.com/agent-inject-secret-tengri-ca: 'true'
        vault.hashicorp.com/agent-limits-cpu: 180m
        vault.hashicorp.com/agent-inject-secret-tengri-key: 'true'
        vault.hashicorp.com/agent-inject-file-eks-key: tls.key
        vault.hashicorp.com/agent-inject-template-eks-ca: >
          {{- with secret
          "/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/eks"
          -}}

          {{ base64Decode (index .Data "ca-cert.pem") }}{{- end -}}
        vault.hashicorp.com/secret-volume-path-eda-tls: /mnt/eda
        vault.hashicorp.com/agent-inject-file-gps-ca: ca-cert.pem
        vault.hashicorp.com/secret-volume-path-tengri-key: /fluent-bit/cert
        vault.hashicorp.com/agent-inject-template-gps-ca: >
          {{- with secret
          "/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/gps"
          -}}

          {{ base64Decode (index .Data "ca-cert.pem") }}{{- end -}}
        vault.hashicorp.com/agent-inject-secret-eda-tls: 'true'
        vault.hashicorp.com/secret-volume-path-egress-gateway-client-file1: /etc/istio/egress-gateway-client-certs
        vault.hashicorp.com/secret-volume-path-eda-key: /mnt/eda
        vault.hashicorp.com/secret-volume-path-egress-gateway-client-file2: /etc/istio/egress-gateway-client-certs
        vault.hashicorp.com/secret-volume-path-egress-gateway-client-file3: /etc/istio/egress-gateway-client-certs
        vault.hashicorp.com/agent-inject-secret-egress-gateway-client-file1: 'true'
        vault.hashicorp.com/secret-volume-path-ott-file1: /mnt/secrets/
        vault.hashicorp.com/agent-inject-secret-eda-key: 'true'
        vault.hashicorp.com/agent-inject-template-tengri-ca: >
          {{- with secret
          "/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/tengri"
          -}}

          {{ base64Decode (index .Data "ca-cert.pem") }}{{- end -}}
        vault.hashicorp.com/agent-inject-secret-egress-gateway-client-file2: 'true'
        vault.hashicorp.com/secret-volume-path-gps-tls: /mnt/gps
        vault.hashicorp.com/secret-volume-path-ott-file2: /mnt/secrets/
        vault.hashicorp.com/agent-inject-file-eda-ca: ca-cert.pem
        vault.hashicorp.com/agent-inject-secret-egress-gateway-client-file3: 'true'
        vault.hashicorp.com/agent-requests-cpu: 156m
        vault.hashicorp.com/secret-volume-path-ott-file3: /mnt/secrets/
        vault.hashicorp.com/agent-inject-file-tengri-ca: ca-cert.pem
        vault.hashicorp.com/agent-inject-secret-eks-ca: 'true'
        vault.hashicorp.com/secret-volume-path-ott-file4: /mnt/secrets/
        vault.hashicorp.com/agent-inject-secret-ott-file1: 'true'
        vault.hashicorp.com/agent-inject-template-eda-ca: >
          {{- with secret
          "/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/eda"
          -}}

          {{ base64Decode (index .Data "ca-cert.pem") }}{{- end -}}
        vault.hashicorp.com/agent-limits-mem: 256Mi
        vault.hashicorp.com/secret-volume-path-eks-tls: /mnt/eks
        vault.hashicorp.com/agent-inject-secret-ott-file2: 'true'
        vault.hashicorp.com/agent-inject-secret-gps-tls: 'true'
        vault.hashicorp.com/secret-volume-path-eks-ca: /mnt/eks
        vault.hashicorp.com/agent-inject-secret-gps-ca: 'true'
        vault.hashicorp.com/agent-inject-secret-ott-file3: 'true'
        vault.hashicorp.com/secret-volume-path-gps-key: /mnt/gps
        vault.hashicorp.com/agent-inject-template-eda-tls: >
          {{- with secret
          "/CI02705348_CI02720459/A/PROM/OSH/CI02705348-FSSP-FND-PROCESS/KV/ci02705348-fssp-fnd-process/eda"
          -}}

          {{ base64Decode (index .Data "tls.crt") }}{{- end -}}
        vault.hashicorp.com/agent-inject-secret-ott-file4: 'true'
        vault.hashicorp.com/agent-inject-secret-eks-tls: 'true'
        vault.hashicorp.com/agent-inject-file-tengri-tls: tls.crt
    spec:
      restartPolicy: Always
      serviceAccountName: default
      schedulerName: default-scheduler
      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
              - matchExpressions:
                  - key: beta.kubernetes.io/arch
                    operator: In
                    values:
                      - amd64
                      - ppc64le
                      - s390x
          preferredDuringSchedulingIgnoredDuringExecution:
            - weight: 2
              preference:
                matchExpressions:
                  - key: beta.kubernetes.io/arch
                    operator: In
                    values:
                      - amd64
            - weight: 2
              preference:
                matchExpressions:
                  - key: beta.kubernetes.io/arch
                    operator: In
                    values:
                      - ppc64le
            - weight: 2
              preference:
                matchExpressions:
                  - key: beta.kubernetes.io/arch
                    operator: In
                    values:
                      - s390x
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - weight: 1
              podAffinityTerm:
                labelSelector:
                  matchExpressions:
                    - key: app
                      operator: In
                      values:
                        - egressgateway-ci02705348-fssp-fnd-process
                topologyKey: kubernetes.io/hostname
      terminationGracePeriodSeconds: 60
      securityContext: {}
      containers:
        - resources:
            limits:
              cpu: 900m
              memory: 1800Mi
            requests:
              cpu: 700m
              memory: 1500Mi
          readinessProbe:
            httpGet:
              path: /actuator/health
              port: 15023
              scheme: HTTP
            initialDelaySeconds: 1
            timeoutSeconds: 5
            periodSeconds: 2
            successThreshold: 1
            failureThreshold: 30
          terminationMessagePath: /dev/termination-log
          name: istio-proxy
          env:
            - name: JWT_POLICY
              value: first-party-jwt
            - name: PILOT_CERT_PROVIDER
              value: istiod
            - name: CA_ADDR
              value: 'istiod-basic.ci03654574-synapserbprom2terra.svc:15012'
            - name: NODE_NAME
              valueFrom:
                fieldRef:
                  apiVersion: v1
                  fieldPath: spec.nodeName
            - name: POD_NAME
              valueFrom:
                fieldRef:
                  apiVersion: v1
                  fieldPath: metadata.name
            - name: POD_NAMESPACE
              valueFrom:
                fieldRef:
                  apiVersion: v1
                  fieldPath: metadata.namespace
            - name: INSTANCE_IP
              valueFrom:
                fieldRef:
                  apiVersion: v1
                  fieldPath: status.podIP
            - name: HOST_IP
              valueFrom:
                fieldRef:
                  apiVersion: v1
                  fieldPath: status.hostIP
            - name: SERVICE_ACCOUNT
              valueFrom:
                fieldRef:
                  apiVersion: v1
                  fieldPath: spec.serviceAccountName
            - name: CANONICAL_SERVICE
              valueFrom:
                fieldRef:
                  apiVersion: v1
                  fieldPath: 'metadata.labels[''service.istio.io/canonical-name'']'
            - name: CANONICAL_REVISION
              valueFrom:
                fieldRef:
                  apiVersion: v1
                  fieldPath: 'metadata.labels[''service.istio.io/canonical-revision'']'
            - name: ISTIO_META_WORKLOAD_NAME
              value: egressgateway-ci02705348-fssp-fnd-process
            - name: ISTIO_META_OWNER
              value: >-
                kubernetes://apis/apps/v1/namespaces/ci02705348-fssp-fnd-process/deployments/ingressgateway-ci02705348-fssp-fnd-process
            - name: ISTIO_META_MESH_ID
              value: cluster.local
            - name: PROXY_CONFIG
              value: >
                {"discoveryAddress":"istiod-basic.ci03654574-synapserbprom2terra.svc:15012","tracing":{"zipkin":{"address":"jaeger-collector.ci03654574-synapserbprom2terra.svc:9411"},"tlsSettings":{"subjectAltNames":[]}},"proxyMetadata":{"DNS_AGENT":""}}
            - name: ISTIO_META_ROUTER_MODE
              value: sni-dnat
            - name: ISTIO_META_CLUSTER_ID
              value: Kubernetes
          securityContext:
            privileged: false
            runAsNonRoot: true
            readOnlyRootFilesystem: true
          ports:
            - name: http-envoy-prom
              containerPort: 15090
              protocol: TCP
          imagePullPolicy: Always
          volumeMounts:
            - name: istio-envoy
              mountPath: /etc/istio/proxy
            - name: istiod-ca-cert
              mountPath: /var/run/secrets/istio
            - name: podinfo
              mountPath: /etc/istio/pod
            - name: ott-uds-socket
              mountPath: /mnt/ott-uds-socket
          terminationMessagePolicy: File
          image: >-
            registry.redhat.io/openshift-service-mesh/proxyv2-rhel8@sha256:320f5bd35c208e00005c01ce0e83c8f05276119f273e9f881da950fdfff59a13
          args:
            - proxy
            - router
            - '--domain'
            - $(POD_NAMESPACE).svc.cluster.local
            - '--proxyLogLevel=warning'
            - '--proxyComponentLogLevel=misc:error'
            - '--log_output_level=default:info'
            - '--serviceCluster'
            - egressgateway-ci02705348-fssp-fnd-process.$(POD_NAMESPACE)
            - '--trust-domain=cluster.local'
        - resources:
            limits:
              cpu: 600m
              memory: 1800Mi
            requests:
              cpu: 400m
              memory: 1500Mi
          readinessProbe:
            httpGet:
              path: /actuator/health
              port: 15023
              scheme: HTTP
            initialDelaySeconds: 3
            timeoutSeconds: 3
            periodSeconds: 1
            successThreshold: 1
            failureThreshold: 30
          terminationMessagePath: /dev/termination-log
          name: ott-sidecar
          env:
            - name: JAVA_TOOL_OPTIONS
              value: >-
                -Dlogging.config=/tmp/ott-logback/logback.xml
                -Dlogback.configurationFile=/tmp/ott-logback/logback.xml
          securityContext:
            privileged: false
            runAsNonRoot: true
            readOnlyRootFilesystem: true
          imagePullPolicy: Always
          volumeMounts:
            - name: ott-logback
              readOnly: true
              mountPath: /tmp/ott-logback
            - name: ott-uds-socket
              mountPath: /mnt/ott-uds-socket
            - name: ott-tmp
              mountPath: /tmp
          terminationMessagePolicy: File
          envFrom:
            - configMapRef:
                name: ott-settings
          image: >-
            registry.ca.sbrf.ru/sigma/pprb/ci00641491/ci01125613_ott/ott-client-api@sha256:e7c8a9a5745c32ab2157a6c823f1174c31de5d08bd35fbc0bc1918fd24b6c7fc
      serviceAccount: default
      volumes:
        - name: istio-envoy
          emptyDir: {}
        - name: istiod-ca-cert
          configMap:
            name: istio-ca-root-cert
            defaultMode: 256
        - name: podinfo
          downwardAPI:
            items:
              - path: labels
                fieldRef:
                  apiVersion: v1
                  fieldPath: metadata.labels
              - path: annotations
                fieldRef:
                  apiVersion: v1
                  fieldPath: metadata.annotations
            defaultMode: 256
        - name: ott-logback
          configMap:
            name: egress-ott-logback
            defaultMode: 256
        - name: ott-uds-socket
          emptyDir:
            medium: Memory
        - name: ott-tmp
          emptyDir: {}
      dnsPolicy: ClusterFirst
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 1
      maxSurge: 1
  revisionHistoryLimit: 10
  progressDeadlineSeconds: 1200
status:
  observedGeneration: 1
  replicas: 1
  updatedReplicas: 1
  readyReplicas: 1
  availableReplicas: 1
  conditions:
    - type: Available
      status: 'True'
      lastUpdateTime: '2023-11-22T20:52:55Z'
      lastTransitionTime: '2023-11-22T20:52:55Z'
      reason: MinimumReplicasAvailable
      message: Deployment has minimum availability.
    - type: Progressing
      status: 'True'
      lastUpdateTime: '2023-11-22T20:54:06Z'
      lastTransitionTime: '2023-11-22T20:52:55Z'
      reason: NewReplicaSetAvailable
      message: >-
        ReplicaSet "egressgateway-ci02705348-fssp-fnd-process-76cf46cbdc" has
        successfully progressed.
